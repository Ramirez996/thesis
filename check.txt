# # using hf now
# def load_model():
#     global model
#     if model is None:
#         if not ensure_checkpoint_available():
#             logger.error("Could not ensure checkpoint availability")
#             return None
#             
#         if os.path.exists(CHECKPOINT_FILE):
#             logger.info("Loading checkpoint from %s", CHECKPOINT_FILE)
#             try:
#                 # torch.load may raise in newer torch versions if weights-only; allow full load for trusted local file
#                 checkpoint = torch.load(CHECKPOINT_FILE, map_location=device, weights_only=False)
#             except TypeError:
#                 # older torch versions don't accept weights_only
#                 checkpoint = torch.load(CHECKPOINT_FILE, map_location=device)
#             except Exception as e:
#                 logger.exception("Error loading checkpoint: %s", e)
#                 return None
#                 
#             try:
#                 num_labels = checkpoint.get('num_labels', len(checkpoint['label_encoder_classes']))
#                 model = EmotionClassifier(num_labels).to(device)
#                 model.load_state_dict(checkpoint['model_state_dict'])
#                 label_encoder.classes_ = checkpoint['label_encoder_classes']
#                 logger.info("Checkpoint loaded successfully: num_labels=%s, device=%s", num_labels, device)
#              #delete natin try 
#                 del checkpoint
#                 gc.collect()
#                 
#             except Exception as e:
#                 logger.exception("Error initializing model from checkpoint: %s", e)
#                 model = None
#                 return None
#         else:
#             logger.error("Checkpoint file does not exist at %s after download attempt", CHECKPOINT_FILE)
#             return None
#     return model